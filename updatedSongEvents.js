songJson = [
    {
      "singerName": "John Doe",
      "songName": "Beautiful Day",
      "songImage": "../Pictures/image-1.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Pop",
      "songUniqueId": "bd123"
    },
    {
      "singerName": "William Jackson",
      "songName": "Electronic",
      "songImage": "../Pictures/image-2.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Rock",
      "songUniqueId": "ed753"
    },
    {
      "singerName": "Isabella Garcia",
      "songName": "Latin ",
      "songImage": "../Pictures/image-3.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Pop",
      "songUniqueId": "lr987"
    },
    {
      "singerName": "Daniel Martin",
      "songName": "Reggae Vibes",
      "songImage": "../Pictures/image-4.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Hip-hop",
      "songUniqueId": "rv654"
    },
    {
      "singerName": "Sophie ",
      "songName": "Bluesy Feel",
      "songImage": "../Pictures/image-5.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Rock",
      "songUniqueId": "bf321"
    },
    {
      "singerName": "Liam Harris",
      "songName": "Funk ",
      "songImage": "../Pictures/image-6.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Hip-hop",
      "songUniqueId": "fg987"
    },
    {
      "singerName": "Ava Taylor",
      "songName": "Acoustic ",
      "songImage": "../Pictures/image-1.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Pop",
      "songUniqueId": "am654"
    },
    {
      "singerName": "Noah ",
      "songName": "R&B Groove",
      "songImage": "../Pictures/image-2.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Rock",
      "songUniqueId": "rb321"
    },
    {
      "singerName": "Grace ",
      "songName": "Chillout Session",
      "songImage": "../Pictures/image-3.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Pop",
      "songUniqueId": "cs987"
    },
    {
      "singerName": "Ethan Phillips",
      "songName": "Ambient ",
      "songImage": "../Pictures/image-4.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Hip-hop",
      "songUniqueId": "ad654"
    },
    {
      "singerName": "Madison ",
      "songName": "Pop Ballad",
      "songImage": "../Pictures/image-5.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Rock",
      "songUniqueId": "pb321"
    },
    {
      "singerName": "Oliver Clark",
      "songName": "Classical ",
      "songImage": "../Pictures/image-6.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Pop",
      "songUniqueId": "cj987"
    },
    {
      "singerName": "Aria Anderson",
      "songName": "Indie ",
      "songImage": "../Pictures/image-1.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Hip-hop",
      "songUniqueId": "im654"
    },
    {
      "singerName": "Benjamin Hall",
      "songName": "Jazz ",
      "songImage": "../Pictures/image-2.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Rock",
      "songUniqueId": "js321"
    },
    {
      "singerName": "Nora ",
      "songName": "Folk Reflections",
      "songImage": "../Pictures/image-3.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Pop",
      "songUniqueId": "fr654"
    },
    {
      "singerName": "Lucas Martinez",
      "songName": " Serenade",
      "songImage": "../Pictures/image-4.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Jazz",
      "songUniqueId": "ss123"
    },
    {
      "singerName": "Emma Adams",
      "songName": " Party",
      "songImage": "../Pictures/image-5.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Pop",
      "songUniqueId": "dp876"
    },
    {
      "singerName": "Logan Brown",
      "songName": " Solo",
      "songImage": "../Pictures/image-6.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Rock",
      "songUniqueId": "gs321"
    },
    {
      "singerName": "Alyssa ",
      "songName": "Rap Battle",
      "songImage": "../Pictures/image-1.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Hip-hop",
      "songUniqueId": "rb987"
    },
    {
      "singerName": "William ",
      "songName": "Piano Concerto",
      "songImage": "../Pictures/image-2.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Classical",
      "songUniqueId": "pc654"
    },
    {
      "singerName": "Leah ",
      "songName": "Bass Groove",
      "songImage": "../Pictures/image-3.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Classical",
      "songUniqueId": "bg321"
    },
    {
      "singerName": "Sophie Davis",
      "songName": "Harmony",
      "songImage": "../Pictures/image-4.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Pop",
      "songUniqueId": "h987"
    },
    {
      "singerName": "Nathan ",
      "songName": "Dubstep Revolution",
      "songImage": "../Pictures/image-4.png",
      "songAudio": "songs/Radhika.mp3",
      "songGenre": "Classical",
      "songUniqueId": "dr654"
    },
    {
      "singerName": "Ella ",
      "songName": "Ukulele Strum",
      "songImage": "../Pictures/image-5.png",
      "songAudio": "songs/TicketEhKonakunda.mp3",
      "songGenre": "Classical",
      "songUniqueId": "us321"
    },
    {
      "singerName": "Jacob ",
      "songName": "Metallica Tribute",
      "songImage": "../Pictures/image-6.png",
      "songAudio": "songs/Nandanandanaa.mp3",
      "songGenre": "Rock",
      "songUniqueId": "mt987"
    },
    
  ]

  
//   all song play list playList
// generes filters events 26-60
const songs_geners = document.querySelector("#song-Generes-types");
//line 55-56
function showSongs(songJson) {
    songs_geners.innerHTML = '';
  songJson.forEach((element, index) => {
    let divSongInfo = document.createElement('div');
    divSongInfo.className = 'song-info';
    
    let button = document.createElement('button');
    button.onclick = function() {
        getInfoAndChangeSong(this);
    };
    
    let spanSongName = document.createElement('span');
    spanSongName.id = index;
    spanSongName.className = 'songName';
    spanSongName.textContent = element.songName;
    
    let spanSeparator = document.createTextNode(' - ');
    
    let spanSingerName = document.createElement('span');
    spanSingerName.className = 'singerName';
    spanSingerName.textContent = element.singerName;
    
    button.appendChild(spanSongName);
    button.appendChild(spanSeparator);
    button.appendChild(spanSingerName);
    
    divSongInfo.appendChild(button);
    
    songs_geners.appendChild(divSongInfo);
    
  });

 
}

// Assuming you have a function to filter songs based on the selected genre
function filterSongsByGenre(selectedGenre) {
  // Your code to filter songs based on the selected genre goes here
  if(selectedGenre === 'All')
   showSongs(songJson);
  else{
   let filterGen = songJson.filter((element)=> element.songGenre == selectedGenre);
   showSongs(filterGen);
  }
   
}

//filtering the song based on selected generes
const filterSelect = document.getElementById('filter-generes-drop');

  filterSelect.addEventListener('change', function(event) {
      const selectedGenre = event.target.value;
      // Call a function to filter songs based on the selected genre
      filterSongsByGenre(selectedGenre);
  });



// add song to current watching window : line-no:64-84
let song_image = document.querySelector(".song-image-card img");
let song_details = document.querySelector(".song-details");
let audio_source = document.querySelector("#audioControls");

function getInfoAndChangeSong(button) {
  
  const index = button.querySelector('.songName').id;
  //add to selected song list if not present
  addToPlayList(songJson[index]);
  renderCurrentSong(songJson[index]);
  
}

//store the current playing song
let currentPlayingSong = null;

//updating playing songs
function renderCurrentSong(songInfo)
{
  currentPlayingSong = songInfo;
  const songName =songInfo.songName;
  const singerName = songInfo.singerName;
  const audio = songInfo.songAudio;
   
  //change html page content line 70-84
  song_image.src = songInfo.songImage; 
  song_details.querySelector(".song-title h2").textContent = songName;
  song_details.querySelector(".song-writer").textContent = singerName;
  

     let audioTag = document.createElement('audio');
     audioTag.controls=true;
     audioTag.autoplay = true;

  // Create new source element
    let newSource = document.createElement('source');
    newSource.src = audio;
    newSource.type = 'audio/mp3';

    audioTag.appendChild(newSource);

    audio_source.innerHTML='';
    audio_source.appendChild(audioTag);
    console.log(audio_source);
}


//arrJson to store current Playlist songs selected by user from Generes
let arrSelectedSongs=[];
//current index of song on arrSelectedSongs
let currentIndOfqueue =-1;
function addToPlayList(song)
{
    const x = arrSelectedSongs.find(presentSong => presentSong.songUniqueId === song.songUniqueId);

    if(!x)
      {
       arrSelectedSongs.push(song);
       currentIndOfqueue= arrSelectedSongs.length-1;
      }
    else{
        alert("Song already in current playlist");
    }

    
}

//play controls :line no 87-99
let prevSongBtn = document.querySelector("#prev-song");
let nextSongBtn = document.querySelector("#next-song");

//move to previous song
prevSongBtn.addEventListener('click' , (event)=>{
   
  if(arrSelectedSongs.length > 0)
   {
     currentIndOfqueue = currentIndOfqueue-1;
     if(currentIndOfqueue < 0)
        currentIndOfqueue = arrSelectedSongs.length-1;
     renderCurrentSong(arrSelectedSongs[currentIndOfqueue]);
   }
   else{
      alert("Please choose some song from Generes");
   }

});

//move to next song
nextSongBtn.addEventListener('click', (event)=>{
      if(arrSelectedSongs.length > 0)
      {
        currentIndOfqueue = currentIndOfqueue+1;
        if(currentIndOfqueue == arrSelectedSongs.length)
           currentIndOfqueue = 0;
        renderCurrentSong(arrSelectedSongs[currentIndOfqueue]);
      }
      else{
        alert("Please choose some song from Generes");
     }
});


// adding song to currentPlaylist 117 -121
let addToPlaylistBtn = document.querySelector("#add-to-list");

// render current selected playlist to current playlist
let currentUserPlayList = document.querySelector(".user-current-playList #all-song");

function renderAllSongsToCurrentPlayList(songList) {
  if (!songList) {
      // If songList is null or undefined, clear the currentUserPlayList and return
      currentUserPlayList.innerHTML = "";
      return;
  }

  // Clear currentUserPlayList before rendering new songs
  currentUserPlayList.innerHTML = "";
  
  songList.forEach((songInfo, index) => {
      let songName = songInfo.songName;
      let singerName = songInfo.singerName;

    // Append each song to currentUserPlayList
    let button = document.createElement('button');
    button.onclick = function() {
        renderCurrentSong(songList[index]);
    };

    let spanSongName = document.createElement('span');
    spanSongName.id = index;
    spanSongName.className = 'songName';
    spanSongName.textContent = songName;
    
    let spanSingerName = document.createElement('span');
    spanSingerName.className = 'singerName';
    spanSingerName.textContent = singerName;
    
    button.appendChild(spanSongName);
    button.appendChild(document.createTextNode(' - '));
    button.appendChild(spanSingerName);
    
    let divSongInfo = document.createElement('div');
    divSongInfo.className = 'song-info';
    divSongInfo.appendChild(button);
    
    currentUserPlayList.appendChild(divSongInfo);
    
  });
}

// adding queue song to currentPlaylist if not present line-no:95
addToPlaylistBtn.addEventListener('click', () => {
  if (  arrSelectedSongs.length > 0 && currentPlayListName != null ) {
     
      const songExistsInPlaylist = arrOfPlayLists[currentPlayListIndex][currentPlayListName].find(song => song.songUniqueId === currentPlayingSong.songUniqueId);
      console.log(arrOfPlayLists[currentPlayListIndex][currentPlayListArr]);
      
      if (!songExistsInPlaylist) {
        
          currentPlayListArr.push(currentPlayingSong);
      }
      renderAllSongsToCurrentPlayList(currentPlayListArr);
  }
  else if(arrOfPlayLists.length == 0)
  {
    alert("Please choose one playlist");
  }
  else{
      confirm("Please choose song from Geners");
  }
  
  
});


// taking current selected playlist array
let currentPlayListArr = [];
let currentPlayListName =null;
let  currentPlayListIndex =null;
function renderPlayListSongs(event)
{
   //current choosing playlist
   currentPlayListName = event.target.textContent;
   //currentPlayListIndex in arrOflist
   currentPlayListIndex = arrOfPlayLists.findIndex(playlist => playlist.hasOwnProperty(currentPlayListName));
   //currentPlayList
   currentPlayListArr = arrOfPlayLists[currentPlayListIndex][currentPlayListName];
   console.log(currentPlayListArr);
   renderAllSongsToCurrentPlayList(currentPlayListArr);  
}

//creating playlist albums :line-no : 124-128
let createListBtn = document.querySelector("#playlist-create-btn");
let arrOfPlayLists=[];
let playListSet=new Set();
function createPlayList(playListName)
{
    if(!playListSet.has(playListName))  
    {
       //adding new list name to set
       playListSet.add(playListName);

       //new play list entry to arr of playlists
       let playlistObject = {};
       playlistObject[playListName] = [];
       arrOfPlayLists.push(playlistObject);

      //creating new playlist button
       const newListBtn = document.createElement('button');
       newListBtn.textContent = playListName;
       newListBtn.addEventListener('click' , renderPlayListSongs);

       document.querySelector(".add-all-playList")
       .querySelector('#all-song').appendChild(newListBtn);
    }
    else{
        confirm("PlayList already exists.\ncreate PlayList with new name");
    }
}

createListBtn.addEventListener('click' , ()=>{
    const playListName = document.querySelector("#playlist-user-text").value;
    document.querySelector("#playlist-user-text").value="";
   
    if(playListName.trim().length!=0)
    {
       createPlayList(playListName.trim());
    }
    else{
        alert("Please enter some name in input box to create playlist");
    }
   
});



// Assuming you already have a renderAllSongs function defined
document.addEventListener('DOMContentLoaded', function() {
  
  showSongs(songJson);
});



